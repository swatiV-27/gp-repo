pipeline {
    agent any 
     stages {
      stage ('git-pull') {
          steps {
            git branch: 'main', url: 'https://github.com/shubhamkalsait/EasyCRUD.git'
            echo "git pull successful"
          }
      }
       stage ('build') {
           steps {
                 sh '''
                 cd backend
                 echo "build successfull"
                  ''' 
          }
       }
       stage ('test') {
         steps {
          dir('backend') {  // enter the folder with pom.xml and compiled classes
          withSonarQubeEnv(installationName: 'sonar-cred' , credentialsId: 'sonar-cred') {
    // some block
       
          sh '''
           mvn clean sonar:sonar  \
           -Dsonar.projectKey=studentapp
           '''
            }
            echo "test successfully"
            }
          } 
        }
       
       stage ('deploy') {
           steps {
               echo "deploy successfully"
           }
       }
 }
}
